<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="dashboard" [text]="'عودة'"></ion-back-button>
    </ion-buttons>
    <ion-title class="back-button-icon-left" *ngIf="chat.chatrole !== 'readonly'" [translate]="'messages.send'"></ion-title>
    <ion-title class="back-button-icon-left" *ngIf="chat.chatrole === 'readonly'" [translate]="'messages.check'"></ion-title>
  </ion-toolbar>
</ion-header>
<ion-content>
  <div class="message-wrap">

    <div *ngFor="let message of chat.allmessages"
         class="message"  [class.left]="message.By != user.id"
         [class.right]="message.By == user.id">
      <ion-card style="margin-top: 0px;margin-right: 0px;margin-left: 0px; margin-bottom: 0px; box-shadow: 0 3px 5px rgba(0, 0, 0, 0.05)">
        <ion-grid>
          <ion-row>
            <ion-col size="12" class="ion-padding-left-16">
              <div class="ion-padding-right-24">{{message.CreatedBy.nameArabic}}</div>
              <h6> {{message.Message}}</h6>
              <div class="ion-padding-right-24">{{message.CreatedAt | dateconvert}}</div>
            </ion-col>
          </ion-row>
        </ion-grid>
      </ion-card>
    </div>

  </div>
</ion-content>

<ion-footer no-border *ngIf="chat.chatrole !== 'readonly'">
  <div class="input-wrap">
    <textarea #chat_input
              placeholder="Type your message"
              [(ngModel)]="editorMsg"
              (keyup.enter)="sendMsg()"
              (focusin)="onFocus()">
    </textarea>
    <button ion-button clear icon-only item-right (click)="sendMsg()" class="chat-button">
      <ion-icon name="ios-send" class="font-size-32"></ion-icon>
    </button>
  </div>
</ion-footer>
