<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="dashboard" [text]="'عودة'"></ion-back-button>
    </ion-buttons>
    <ion-title class="back-button-icon-left" [translate]="'kiosks.title'"></ion-title>
  </ion-toolbar>
</ion-header>
<ion-content class="committee-background-design">
  <app-shared-userdirective></app-shared-userdirective>
  <ion-item class="committee-background-white">
    <ion-grid>
      <ion-row>
        <h3>{{'المحافظة  :' + kiosksmodel.governorate.arabicName + ' · ' +  ' الولاية:' + kiosksmodel.wilayat.arabicName}}</h3>
      </ion-row>
      <ion-row>
        <ion-col size="3" class="padding-0 ion-margin-top-12">
          <div class="font-size-14 ion-padding-bottom-8 committee-color-contrast" [translate]="'kiosks.totalkiosks'"></div>
          <div><strong>{{this.kioksstatus.kiosksStatus.total}}</strong></div>
        </ion-col>
        <ion-col size="3" class="padding-0 ion-margin-top-12">
          <div class="font-size-14 ion-padding-bottom-8 committee-color-contrast" [translate]="'kiosks.locked'"></div>
          <div><strong>{{this.kioksstatus.kiosksStatus.locked}}</strong></div>
        </ion-col>
        <ion-col size="3" class="padding-0 ion-margin-top-12">
          <div class="font-size-14 ion-padding-bottom-8 committee-color-contrast" [translate]="'kiosks.opened'"></div>
          <div><strong>{{this.kioksstatus.kiosksStatus.opened}}</strong></div>
        </ion-col>
        <ion-col size="3" class="padding-0 ion-margin-top-12">
          <div class="font-size-14 ion-padding-bottom-8 committee-color-contrast" [translate]="'kiosks.closed'"></div>
          <div><strong>{{this.kioksstatus.kiosksStatus.closed}}</strong></div>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col size="12" class="font-size-14">
          <ion-label><span [translate]="'common.polling_station'"></span></ion-label>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col size="12">
          <ion-select [interfaceOptions]="customPSOptions" [cancelText]="'إلغاء'" [okText]="'تطبيق'"
                      interface="action-sheet" multiple="false" placeholder="أختيار المركز الانتخابي" class="committee-ion-select-dark"
                      [(ngModel)]="kiosksmodel.pollingstation.name"
                      (ionChange)="onChangePollingStation($event)">
            <ion-select-option *ngFor="let data of kiosksmodel.pollingstations"
                               value="{{data.name}}">{{data.arabicName}}</ion-select-option>
          </ion-select>
        </ion-col>
      </ion-row>
    </ion-grid>
  </ion-item>
  <ion-item class="committee-background-transparent">
    <ion-grid>
      <ion-row>
        <ion-col size="12">
          <div class="font-size-14 ion-padding-bottom-8 committee-color-contrast" [translate]="'common.polling_station'"></div>
        </ion-col>
      </ion-row>
      <ion-row *ngFor="let pollingstation of kioksstatus.pollingstations">
<!--        <span *ngIf="kiosksmodel && kiosksmodel.pollingstation && (kiosksmodel.pollingstation.name === 'All' || !kiosksmodel.pollingstation.name)">-->
        <ion-col size="12" *ngIf="pollingstation ">
          <h4 color="dark-shade" class="font-size-18 ion-margin-top-8">{{pollingstation.arabicName}}</h4>
        </ion-col>
        <ion-col>
          <ion-card *ngIf="pollingstation.kiosks && pollingstation.kiosks.length === 0">
            <ion-card-header>
              <div class="font-size-18 fontweight-bold" [translate]="'kiosks.no_records_founds'">
              </div>
            </ion-card-header>
          </ion-card>
        </ion-col>
        <ion-col size="12" class="font-size-14" *ngFor="let kiosk of pollingstation.kiosks">
          <ion-card *ngIf="kiosk">
            <ion-card-header>
              <div class="font-size-18 fontweight-bold"> {{kiosk.serialNumber}}
                <ion-chip class="committee-chip-background-{{kiosk.openTime == '' ? 'black': 'green'}}">
                  <ion-label color="light">{{kiosk.openTime == "" ? "مغلق": "افتح"}}</ion-label>
                </ion-chip>
              </div>
            </ion-card-header>
            <ion-card-content *ngIf="kiosk && kiosk.kioskassigned && kiosk.kioskassigned.length">
              <div class="font-size-14 ion-padding-bottom-8 committee-color-contrast"><span [translate]="'kiosks.assignedto'"></span></div>
              <div class="font-size-14 ion-padding-bottom-8 committee-color-contrast" *ngFor="let member of kiosk.kioskassigned">
               <span *ngIf="member && member.member"><ion-icon slot="icon-only" class="committee-user-status-icon-green" name="radio-button-on"></ion-icon>
                {{member.member.nameArabic}}
                 <span class="ion-float-end committee-button-text-color" *ngIf="user.roles.attendanceTabReassign" (click)="reAssignUser(member, kiosk)" [translate]="'kiosks.reassign'"></span></span>
              </div>
<!--              <div class="font-size-14 ion-padding-bottom-8 committee-color-contrast" *ngIf="kiosk.kioskassigned && kiosk.kioskassigned.length == 1">-->
<!--                <span class="ion-padding-left-20 font-size-12" [translate]="'kiosks.none'"></span>-->
<!--                <span class="ion-float-end committee-button-text-color" *ngIf="user.roles.attendanceTabReassign" (click)="reAssignUser(null, kiosk)" [translate]="'kiosks.assign'"></span>-->
<!--              </div>-->
            </ion-card-content>
            <ion-card-content *ngIf="kiosk && kiosk.kioskassigned && kiosk.kioskassigned.length == 0">
              <div class="font-size-14 ion-padding-bottom-8 committee-color-contrast"><span [translate]="'kiosks.none'"></span> <span class="ion-float-end committee-button-text-color" *ngIf="user.roles.attendanceTabReassign" (click)="assignUser(kiosk)" [translate]="'kiosks.assignmember'"></span></div>
            </ion-card-content>
          </ion-card>
        </ion-col>
<!--        </span>-->
      </ion-row>
    </ion-grid>
  </ion-item>
</ion-content>

